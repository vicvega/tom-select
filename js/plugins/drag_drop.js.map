{"version":3,"file":"drag_drop.js","sources":["../../../src/plugins/drag_drop/plugin.ts"],"sourcesContent":["/**\n * Plugin: \"drag_drop\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport TomSelect from '../../tom-select';\n\nexport default function(this:TomSelect) {\n\tvar self = this;\n\tif (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n\tif (self.settings.mode !== 'multi') return;\n\n\tvar orig_lock\t\t= self.lock;\n\tvar orig_unlock\t\t= self.unlock;\n\n\tself.hook('instead','lock',()=>{\n\t\tvar sortable = $(self.control).data('sortable');\n\t\tif (sortable) sortable.disable();\n\t\treturn orig_lock.call(self);\n\t});\n\n\tself.hook('instead','unlock',()=>{\n\t\tvar sortable = $(self.control).data('sortable');\n\t\tif (sortable) sortable.enable();\n\t\treturn orig_unlock.call(self);\n\t});\n\n\tself.on('initialize',()=>{\n\t\tvar $control = $(self.control).sortable({\n\t\t\titems: '[data-value]',\n\t\t\tforcePlaceholderSize: true,\n\t\t\tdisabled: self.isLocked,\n\t\t\tstart: (e, ui) => {\n\t\t\t\tui.placeholder.css('width', ui.helper.css('width'));\n\t\t\t\t$control.css({overflow: 'visible'});\n\t\t\t},\n\t\t\tstop: ()=>{\n\t\t\t\t$control.css({overflow: 'hidden'});\n\n\t\t\t\tvar values:string[] = [];\n\t\t\t\t$control.children('[data-value]').each(function(this:HTMLElement){\n\t\t\t\t\tif( this.dataset.value ) values.push(this.dataset.value);\n\t\t\t\t});\n\n\t\t\t\tself.setValue(values);\n\t\t\t}\n\t\t});\n\n\t});\n\n};\n"],"names":["self","$","fn","sortable","Error","settings","mode","orig_lock","lock","orig_unlock","unlock","hook","control","data","disable","call","enable","on","$control","items","forcePlaceholderSize","disabled","isLocked","start","e","ui","placeholder","css","helper","overflow","stop","values","children","each","dataset","value","push","setValue"],"mappings":";;;;;;;;;;;CAAA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAIe,eAAyB,IAAA;GACvC,IAAIA,IAAI,GAAG,IAAI,CAAA;CACf,EAAA,IAAI,CAACC,CAAC,CAACC,EAAE,CAACC,QAAQ,EAAE,MAAM,IAAIC,KAAK,CAAC,uDAAuD,CAAC,CAAA;CAC5F,EAAA,IAAIJ,IAAI,CAACK,QAAQ,CAACC,IAAI,KAAK,OAAO,EAAE,OAAA;CAEpC,EAAA,IAAIC,SAAS,GAAIP,IAAI,CAACQ,IAAI,CAAA;CAC1B,EAAA,IAAIC,WAAW,GAAIT,IAAI,CAACU,MAAM,CAAA;CAE9BV,EAAAA,IAAI,CAACW,IAAI,CAAC,SAAS,EAAC,MAAM,EAAC,MAAI;CAC9B,IAAA,IAAIR,QAAQ,GAAGF,CAAC,CAACD,IAAI,CAACY,OAAO,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC,CAAA;CAC/C,IAAA,IAAIV,QAAQ,EAAEA,QAAQ,CAACW,OAAO,EAAE,CAAA;CAChC,IAAA,OAAOP,SAAS,CAACQ,IAAI,CAACf,IAAI,CAAC,CAAA;CAC5B,GAAC,CAAC,CAAA;CAEFA,EAAAA,IAAI,CAACW,IAAI,CAAC,SAAS,EAAC,QAAQ,EAAC,MAAI;CAChC,IAAA,IAAIR,QAAQ,GAAGF,CAAC,CAACD,IAAI,CAACY,OAAO,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC,CAAA;CAC/C,IAAA,IAAIV,QAAQ,EAAEA,QAAQ,CAACa,MAAM,EAAE,CAAA;CAC/B,IAAA,OAAOP,WAAW,CAACM,IAAI,CAACf,IAAI,CAAC,CAAA;CAC9B,GAAC,CAAC,CAAA;CAEFA,EAAAA,IAAI,CAACiB,EAAE,CAAC,YAAY,EAAC,MAAI;KACxB,IAAIC,QAAQ,GAAGjB,CAAC,CAACD,IAAI,CAACY,OAAO,CAAC,CAACT,QAAQ,CAAC;CACvCgB,MAAAA,KAAK,EAAE,cAAc;CACrBC,MAAAA,oBAAoB,EAAE,IAAI;OAC1BC,QAAQ,EAAErB,IAAI,CAACsB,QAAQ;CACvBC,MAAAA,KAAK,EAAEA,CAACC,CAAC,EAAEC,EAAE,KAAK;CACjBA,QAAAA,EAAE,CAACC,WAAW,CAACC,GAAG,CAAC,OAAO,EAAEF,EAAE,CAACG,MAAM,CAACD,GAAG,CAAC,OAAO,CAAC,CAAC,CAAA;SACnDT,QAAQ,CAACS,GAAG,CAAC;CAACE,UAAAA,QAAQ,EAAE,SAAA;CAAS,SAAC,CAAC,CAAA;QACnC;OACDC,IAAI,EAAEA,MAAI;SACTZ,QAAQ,CAACS,GAAG,CAAC;CAACE,UAAAA,QAAQ,EAAE,QAAA;CAAQ,SAAC,CAAC,CAAA;SAElC,IAAIE,MAAe,GAAG,EAAE,CAAA;SACxBb,QAAQ,CAACc,QAAQ,CAAC,cAAc,CAAC,CAACC,IAAI,CAAC,YAA0B;CAChE,UAAA,IAAI,IAAI,CAACC,OAAO,CAACC,KAAK,EAAGJ,MAAM,CAACK,IAAI,CAAC,IAAI,CAACF,OAAO,CAACC,KAAK,CAAC,CAAA;CACzD,SAAC,CAAC,CAAA;CAEFnC,QAAAA,IAAI,CAACqC,QAAQ,CAACN,MAAM,CAAC,CAAA;CACtB,OAAA;CACD,KAAC,CAAC,CAAA;CAEH,GAAC,CAAC,CAAA;CAEH;;;;;;;;"}